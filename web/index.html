<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta http-equiv="Content-type" content="text/html" charset="UTF-8" />
        <title>Techreport â€” The latest technology trends in jobs</title>
        <link rel="stylesheet" type="text/css" href="dc.css" />
        <link rel="stylesheet" type="text/css" href="techreport.css" />
    </head>
    <body>
        <script type="text/javascript" src="crossfilter.js"></script>
        <script type="text/javascript" src="d3.js"></script>
        <script type="text/javascript" src="dc.js"></script>
        <script type="text/javascript">
            function print_filter(filter){
                var f=eval(filter);
                if (typeof(f.length) != "undefined") {}else{}
                if (typeof(f.top) != "undefined") {f=f.top(Infinity);}else{}
                if (typeof(f.dimension) != "undefined") {f=f.dimension(function(d) { return "";}).top(Infinity);}else{}
                console.log(filter+"("+f.length+") = "+JSON.stringify(f).replace("[","[\n\t").replace(/}\,/g,"},\n\t").replace("]","\n]"));
            }
            
            function remove_empty_bins(source_group) {
                return {
                    all:function () {
                        return source_group.all().filter(function(d) {
                            return d.value != 0;
                        });
                    }
                };
            }
            
            d3.csv("matching.csv", function(error, data) {
                var ndx = crossfilter(data);
                
                var categoryDimension = ndx.dimension(dc.pluck("Category"));
                var categoryGroup = categoryDimension.group();
                
                var technologyDimension = ndx.dimension(dc.pluck("Technology"));
                var technologyGroup = remove_empty_bins(technologyDimension.group())
                
                var companyDimension = ndx.dimension(dc.pluck("Company"));
                var companyGroup = companyDimension.group();
                
                var categoriesMenu = dc.selectMenu("#categoriesmenu")
                    .dimension(categoryDimension)
                    .group(categoryGroup)
                    .promptText("All categories");
                
                var technologyRowChart = dc.rowChart("#technologyrowchart")
                    .dimension(technologyDimension)
                    .group(technologyGroup)
                    .width(800)
                    .height(400)
                    .x(d3.scale.linear())
                    .elasticX(true)
                    .ordering(function(d) { return -d.value })
                    .rowsCap(10);
                
                var companyPieChart = dc.pieChart("#companypiechart")
                    .dimension(companyDimension)
                    .group(companyGroup)
                    .width(400)
                    .height(400)
                    .radius(100)
                    .innerRadius(40)
                    .externalLabels(50)
                    .minAngleForLabel(0)
                    .drawPaths(true)
                    .slicesCap(10);
                
                dc.renderAll();
            });
        </script>
        <div class="columntext">
            <h1>Techreport</h1>
            <h2>The latest technology trends in jobs</h2>
            <p>Techreport tackles one question: Which technologies are mostly demanded by hiring companies today? The answer comes in the form of a series of charts you can interact with.</p>
        </div>
        <div id="categoriesmenu">
            <p class="charttitle"><strong>Categories of technologies</strong></p>
        </div>
        <div id="technologyrowchart">
            <p class="charttitle"><strong>Top 10 technologies</strong></strong></p>
        </div>
        <div id="companypiechart">
            <p class="charttitle"><strong>Top 10 companies</strong></p>
        </div>
    </body>
</html>
